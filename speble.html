<!DOCTYPE html>
<html>
<head>
<link rel="styleSheet" href="css/spebleStyle.css">
</head>
<body>

<h1>Speble</h1>

<p id="stable"></p>

<p id="resulats"></p>

<select  id="stableSelect" onchange="selectFunction()">
    <option value="none" selected disabled hidden>Choisis un stablecoin</option>
    <option value="Ampleforth">Ampleforth</option>
    <option value="Tether">Tether</option>
</select>

<script>
    var vAmpl = [0.9440, 0.9953, 1.098, 1.174, 1.139, 1.189, 1.274, 1.435, 1.611, 1.693, 1.765, 1.924, 1.681, 1.445, 1.276, 1.229, 1.106, 0.9495, 0.9396, 0.9780, 1.147, 1.265, 1.414, 1.383, 1.337, 1.274, 1.333, 1.441, 1.477, 1.355, 1.275, 1.473, 1.478, 1.353, 1.540, 1.487, 1.659, 1.759, 1.699, 1.880, 1.892, 1.896, 2.052, 1.905, 1.944, 1.914, 1.749, 1.514, 1.379, 1.398, 1.492, 1.578, 1.527, 1.434, 1.577, 1.675, 1.777, 1.620, 1.671, 1.484, 1.293, 1.064, 1.071, 0.8459, 0.6066, 0.7985, 0.7573, 0.7401, 0.5551, 0.4684, 0.4649, 0.6606, 0.5156, 0.6319, 0.6086, 0.7367, 0.9067, 0.8481, 1.053, 1.206, 1.118, 0.8978, 1.000, 1.185, 1.197, 1.167, 1.238, 1.375, 1.184, 1.364, 1.340, 1.265, 1.329, 1.443, 1.543, 1.320, 1.188, 0.9430, 1.040, 1.203];
    var vTether = [0.9939, 1.119, 1.043, 1.000, 0.8648, 0.7281, 0.6092, 0.5281, 0.6415, 0.6073, 0.8272, 0.7521, 0.7955, 1.035, 1.167, 1.402, 1.214, 1.385, 1.202, 1.455, 1.650, 1.528, 1.556, 1.370, 1.579, 1.401, 1.274, 1.286, 1.363, 1.321, 1.134, 1.226, 1.135, 1.172, 1.209, 1.363, 1.280, 1.174, 1.148, 1.298, 1.175, 1.236, 1.369, 1.248, 1.074, 1.214, 1.159, 1.437, 1.542, 1.714, 1.664, 1.736, 1.883, 1.997, 1.901, 1.689, 1.717, 1.479, 1.548, 1.475, 1.342, 1.134, 1.083, 1.310, 1.090, 1.328, 1.194, 1.397, 1.353, 1.161, 1.260, 1.279, 1.414, 1.349, 1.197, 1.387, 1.524, 1.299, 1.128, 0.9271, 0.7721, 0.6698, 0.9659, 0.9399, 0.7821, 0.6712, 0.8755, 0.9708, 0.7924, 0.6152, 0.6537, 0.9282, 1.109, 1.286, 1.290, 1.421, 1.357, 1.347, 1.303, 1.395];

    function selectFunction() {
        var x = document.getElementById("stableSelect").value;
        document.getElementById("stable").innerHTML = x;
        traitement(x);
    }
    
    function traitement(x) {
        var v;
        var driftPos = [];
        var driftNeg = [];

        switch(x) {
            case "Ampleforth":
                v = vAmpl;
                break;
            case "Tether":
                v = vTether;
                break;
        }

        for(let i = 0; i < v.length; i++) {
            if (v[i] > 1) {
                driftPos.push(v[i]);
            }
            if (v[i] < 1) {
                driftNeg.push(v[i]);
            }
        }

        var sommePos = 0;
        for(let i = 0; i < driftPos.length; i++) {
            sommePos += driftPos[i]; 
        }
        var IPos = sommePos/driftPos.length;

        var sommeNeg = 0;
        for(let i = 0; i < driftNeg.length; i++) {
            sommeNeg += driftNeg[i]; 
        }
        var INeg = sommeNeg/driftNeg.length;
        
        document.getElementById("resulats").innerHTML = Number.parseFloat(IPos).toPrecision(4) + " " 
        + Number.parseFloat(INeg).toPrecision(4);
    }

//établir un coeff en fonction de la date (par exemple pour les 6 derniers mois l'intensité à un meilleur coeff)
//ou alors établir en fonction du marketcap
</script>

</body>
</html> 

