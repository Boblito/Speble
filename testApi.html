<!DOCTYPE html>
<html>
<body>

<p id="dates"></p>
<hr>
<p id="prix"></p>

<script src="https://unpkg.com/axios/dist/axios.min.js"></script>
<script>

async function getData() {
  try {
    var response = await axios.get('https://api.coingecko.com/api/v3/coins/ampleforth/market_chart?vs_currency=usd&days=30&interval=daily');
    console.log(response.data);
    return response.data;
  } catch (error) {
    console.error(error);
  }
}

var dates = [];
var prix = [];

(async () => {
    const data = await getData();
    save(data.prices);
})();

function save(obj) {
    for(var i in obj) {
        dates.push(obj[i][0]);
        prix.push(obj[i][1]);
        var dateObject = formatDate(dates[i]);
        document.getElementById("dates").innerHTML += dateObject + " ";
        document.getElementById("prix").innerHTML += prix[i] + " ";
    }
};

function formatDate(date) {
    var d = new Date(date),
        month = '' + (d.getMonth() + 1),
        day = '' + d.getDate(),
        year = d.getFullYear();

    if (month.length < 2) 
        month = '0' + month;
    if (day.length < 2) 
        day = '0' + day;

    return [year, month, day].join('-');
}

console.log(dates);
console.log(prix);

</script>

</body>
</html> 